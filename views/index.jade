extends layout

block content
  .page-header
      h1 Clan loader
          small  Visual interface for WoTcs.com clans API server

  .btn-group
      a.btn.btn-default(href="?key=EU1",class=key=='EU1'?'active':'') EU (Thread #1)
      a.btn.btn-default(href="?key=EU2",class=key=='EU2'?'active':'') EU (Thread #2)
      a.btn.btn-default(href="?key=NA",class=key=='NA'?'active':'') NA
      a.btn.btn-default(href="?key=RU-SEA-KR",class=key=='RU-SEA-KR'?'active':'') RU/SEA/KR
  br
  br

  if error
    .alert.alert-danger= error
  else
      small * Average of last 10 requests
      .row
          .col-sm-4
            .list-group
                .list-group-item
                    .badge#current_speed= speeds.currentSpeed + ' clans/s'
                    | Current speed *
                .list-group-item
                    .badge#average_speed= speeds.averageSpeed + ' clans/s'
                    | Average speed
                .list-group-item
                    .badge#current_duration= speeds.duration + ' ms'
                    | Current request duration *

          .col-sm-4
            .list-group
                .list-group-item
                    .badge#running_time= cycleTimes.duration
                    | Cycle running time
                .list-group-item
                    .badge#remaining_time= cycleTimes.remainingTime
                    | Cycle remaining time
                .list-group-item
                    .badge#completion= cycleTimes.completion + ' %'
                    | Cycle completion

          .col-sm-4
              .list-group
                  .list-group-item
                      .badge#finished_requests= cycleData.finishedRequests
                      | Finished requests
                  .list-group-item
                      .badge#error_requests= cycleData.errorRequests
                      | Error requests
                  .list-group-item
                      .badge#error_rate= cycleData.errorRate + ' %'
                      | Error rate

      .progress
          .progress-bar(role='progress-bar',style='width:'+cycleTimes.completion+'%')

      .row
          .col-sm-4
              .panel.panel-default
                  .panel-heading
                      h3 List of requests
                  .list-group#request_list

      script.
          APIData = {key: '!{key}'}